<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintélo</title>
    <link rel="stylesheet" href="css/denuncias.css">
    <link rel="icon" href="/imagens/brilhoescuro.png" type="image/x-icon">
</head>
<body>
    <!-- Header Mobile -->
    <section class="oculto-desktop">
        <header>
            <nav class="grid">
                <a href="javascript:void(0)" onclick="goBack()">
                    <img src="imagens/seta.png" alt="Voltar">
                </a>
                <img src="imagens/logo.png" alt="Logo">
                <img src="imagens/foto-branca.png" class="img-branca">
            </nav>
        </header>
    </section>

    <!-- Header Desktop -->
    <section class="oculto-mobile">
        <section class="discount-banner">
            <span class="highlight">Painel Administrativo - Denúncias</span>
        </section>
        <header class="main-header">
            <a href="/homeadm">
                <img src="imagens/logo.png" class="img-logo">
            </a>
            <nav>
                <a href="/homeadm">Home Admin</a>
                <a href="/blogadm">Blog</a>
                <a href="/denuncias">Denúncias</a>
                <a href="/avaliacaoadm">Avaliações</a>
            </nav>
            <section class="search-profile">
                <form>
                    <input type="text" placeholder="Buscar...">
                </form>
                <ul>
                    <li><a href="/homeadm"><img src="imagens/icone sem cadastro.png" class="maria"></a></li>
                    <li><a href="/homeadm"><img src="imagens/icone saco.png" class="img-tamanho"></a></li>
                    <li><a href="/homeadm"><img src="imagens/icone coraçao.png" class="img-tamanho2"></a></li>
                </ul>
            </section>
        </header>
    </section>

    <main class="admin-container">
        <section class="page-title">
            <span class="garimpe-text">Gerenciar</span><br>
            <span class="vintelo-text">Denúncias</span>
        </section>

        <!-- Filtros -->
        <section class="filters-section">
            <select class="filter-select">
                <option value="todas">Todas as denúncias</option>
                <option value="pendentes">Pendentes</option>
                <option value="analisadas">Analisadas</option>
                <option value="resolvidas">Resolvidas</option>
            </select>
            <select class="filter-select">
                <option value="todos">Todos os tipos</option>
                <option value="perfil">Perfil inadequado</option>
                <option value="produto">Produto irregular</option>
                <option value="comportamento">Comportamento</option>
            </select>
        </section>

        <!-- Lista de Denúncias -->
        <section class="denuncias-list">
            <% if (denuncias && denuncias.length > 0) { %>
                <% denuncias.forEach(denuncia => { %>
                    <article class="denuncia-card" data-id="<%= denuncia.ID_DENUNCIA %>" data-status="<%= denuncia.STATUS %>">
                        <section class="denuncia-header">
                            <span class="status-badge <%= denuncia.STATUS %>"><%= denuncia.STATUS === 'pendente' ? 'Pendente' : denuncia.STATUS === 'analisada' ? 'Em análise' : 'Resolvida' %></span>
                            <span class="data"><%= new Date(denuncia.DATA_DENUNCIA).toLocaleDateString('pt-BR') %></span>
                        </section>
                        
                        <section class="denuncia-content">
                            <section class="perfil-denunciado">
                                <img src="<%= denuncia.IMG_ALVO || '/imagens/imagem sem cadastro.avif' %>" alt="Perfil" class="perfil-img">
                                <section class="perfil-info">
                                    <h3>@<%= denuncia.USER_ALVO || 'usuario' %></h3>
                                    <p><%= denuncia.NOME_ALVO || 'Nome não informado' %></p>
                                    <span class="tipo-usuario"><%= denuncia.TIPO_ALVO === 'b' ? 'Vendedor' : 'Comprador' %></span>
                                </section>
                            </section>
                            
                            <section class="denuncia-detalhes">
                                <h4>Tipo: <%= denuncia.MOTIVO || 'Não especificado' %></h4>
                                <p class="motivo"><%= denuncia.DESCRICAO || 'Sem descrição' %></p>
                                <p class="denunciante">Denunciado por: @<%= denuncia.USER_DENUNCIANTE || 'anonimo' %></p>
                                <% if (denuncia.STATUS === 'resolvida') { %>
                                    <p class="resolucao"><strong>Resolução:</strong> Caso analisado e resolvido pela equipe administrativa.</p>
                                <% } %>
                            </section>
                        </section>
                        
                        <section class="denuncia-actions">
                            <% if (denuncia.STATUS !== 'resolvida') { %>
                                <button class="btn-analisar" onclick="analisarDenuncia(<%= denuncia.ID_DENUNCIA %>)">Analisar</button>
                                <button class="btn-resolver" onclick="resolverDenuncia(<%= denuncia.ID_DENUNCIA %>)">Resolver</button>
                                <button class="btn-rejeitar" onclick="rejeitarDenuncia(<%= denuncia.ID_DENUNCIA %>)">Rejeitar</button>
                            <% } else { %>
                                <span class="status-text">Caso resolvido</span>
                            <% } %>
                        </section>
                    </article>
                <% }) %>
            <% } else { %>
                <section class="empty-state">
                    <p>Nenhuma denúncia encontrada.</p>
                </section>
            <% } %>
        </section>
    </main>

    <script src="js/denuncias.js"></script>

    <footer class="footer">
        <img src="imagens/logo2.jpeg" alt="Vintélo" class="footer-image">
        <section class="social-media">
            <p class="p-footer">Siga nossas redes sociais</p>
            <ul class="social-links">
                <li class="social-link">
                    <a href="https://www.instagram.com/vintelobrechos" target="_blank">
                        <img src="imagens/Instagram.png" alt="Instagram">
                    </a>
                </li>
                <li class="social-link">
                    <a href="https://facebook.com/vintelo" target="_blank">
                        <img src="imagens/Facebook.png" alt="Facebook">
                    </a>
                </li>
                <li class="social-link">
                    <a href="https://pinterest.com/vintelo" target="_blank">
                        <img src="imagens/Pinterest.png" alt="Pinterest">
                    </a>
                </li>
            </ul>
        </section>
        <p class="copyright">©2024 Vintélo. Todos os direitos reservados.</p>
    </footer>
    <script src="/js/perfil-autenticado.js"></script>
    <script src="/js/navegacao.js"></script>
    <script src="/js/navegacao.js"></script>
    <script>
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>
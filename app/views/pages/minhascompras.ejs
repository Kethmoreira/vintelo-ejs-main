
<!DOCTYPE html>
<html>
  <meta charset="UTF-8">
  <head>
    <title>Vint√©lo</title>
    <link rel="stylesheet" href="css/minhascompras.css">
    <link rel="icon" href="/imagens/brilhoescuro.png" type="image/x-icon">
    
  </head>
  <body>
    <!-- Cabe√ßalho Desktop -->
    <section class="oculto-mobile">
      <section class="top-bar">
        <p>10% OFF na primeira compra</p>
      </section>
      <section class="main-header">
        <a href="/homecomprador">
          <img src="imagens/logo.png" class="img-logo">
        </a>
        <nav>
          <a href="/categorias">Vestidos</a>
          <a href="/categorias">Saias</a>
          <a href="/categorias">Blusas</a>
          <a href="/categorias">Cal√ßas</a>
          <a href="/categorias">Outros</a>
        </nav>
        <section class="search-profile">
          <form>
            <input type="text" placeholder="Buscar...">
          </form>
          <ul>
            <li><a href="/perfilcliente"><img src="imagens/icone sem cadastro.png" class="img-tamanho user-profile-img"></a></li>
            <li><a href="/criarbrecho"><img src="imagens/add brecho.png" class="img-tamanho"></a></li>
            <li><a href="/favoritos"><img src="imagens/icone cora√ßao.png" class="img-tamanho"></a></li>
          </ul>
        </section>
      </section>
    </section>

    <!-- Cabe√ßalho Mobile -->
    <section class="oculto-desktop">
      <header>
        <nav class="grid">
          <a href="javascript:void(0)" class="seta-voltar">
            <img src="imagens/seta.png" alt="seta-voltar">
          </a>
          <h1>Minhas compras</h1>
          <a href="javascript:void(0)" onclick="goBack()">
            <img src="imagens/carrinho.png" alt="Descri√ß√£o da Imagem" />
          </a>
        </nav>
      </header>
    </section>
        <main class="main">
        <section class="order-section">
          <% if (typeof pedidos !== 'undefined' && pedidos && pedidos.length > 0) { %>
            <% pedidos.forEach(function(pedido, index) { %>
              <section class="order-date"><%= new Date(pedido.DT_PEDIDO).toLocaleDateString('pt-BR', { day: 'numeric', month: 'long' }) %></section>
              <section class="order-card">
                <section class="order-content">
                  <img src="<%= pedido.URL_IMG || 'imagens/produto-default.png' %>" alt="<%= pedido.NOME_PRODUTO %>" class="product-image">
                  <section class="order-info">
                    <h2 class="product-title"><%= pedido.NOME_PRODUTO %></h2>
                    <p class="status <%= pedido.STATUS_PEDIDO === 'Enviado' ? 'in-progress' : pedido.STATUS_PEDIDO === 'Cancelado' ? 'canceled' : 'delivered' %>">
                      <%= pedido.STATUS_PEDIDO === 'Enviado' ? 'A caminho' : pedido.STATUS_PEDIDO === 'Cancelado' ? 'Pedido cancelado' : 'Entregue' %>
                    </p>
                    <p class="delivery-info">
                      <% if (pedido.STATUS_PEDIDO === 'Enviado') { %>
                        Chegar√° em breve
                      <% } else if (pedido.STATUS_PEDIDO === 'Cancelado') { %>
                        Reembolso processado
                      <% } else { %>
                        Entregue com sucesso
                      <% } %>
                    </p>
                    <section class="order-actions">
                      <% if (pedido.STATUS_PEDIDO !== 'Cancelado') { %>
                        <button class="track-btn" onclick="toggleTracking(this)">Rastrear Pedido</button>
                      <% } %>
                      <button class="details-btn" onclick="toggleOrderDetails(this)">Ver Detalhes</button>
                    </section>
                  </section>
                </section>
            
                <section class="order-details" style="display: none;">
                  <h3>Detalhes do Pedido</h3>
                  <section class="detail-row">
                    <span class="detail-label">N√∫mero do Pedido:</span>
                    <span class="detail-value">#<%= pedido.ID_PEDIDO %></span>
                  </section>
                  <section class="detail-row">
                    <span class="detail-label">Data do Pedido:</span>
                    <span class="detail-value"><%= new Date(pedido.DT_PEDIDO).toLocaleDateString('pt-BR') %></span>
                  </section>
                  <section class="detail-row">
                    <span class="detail-label">Valor Total:</span>
                    <span class="detail-value">R$ <%= parseFloat(pedido.VALOR_TOTAL || 0).toFixed(2).replace('.', ',') %></span>
                  </section>
                  <section class="detail-row">
                    <span class="detail-label">Forma de Pagamento:</span>
                    <span class="detail-value">PIX</span>
                  </section>
                  <section class="detail-row">
                    <span class="detail-label">Vendedor:</span>
                    <span class="detail-value"><%= pedido.VENDEDOR || 'Vint√©lo' %></span>
                  </section>
                  <% if (pedido.CODIGO_RASTREIO) { %>
                    <section class="detail-row">
                      <span class="detail-label">C√≥digo de Rastreio:</span>
                      <span class="detail-value"><%= pedido.CODIGO_RASTREIO %></span>
                    </section>
                  <% } %>
                </section>
                <section class="tracking-details" style="display: none;">
                  <section class="tracking-step completed">
                    <span class="step-icon">‚úì</span>
                    <section class="step-info">
                      <p class="step-title">Pedido Confirmado</p>
                      <p class="step-time"><%= new Date(pedido.DT_PEDIDO).toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' }) %> - 10:30</p>
                    </section>
                  </section>
                  <% if (pedido.STATUS_PEDIDO !== 'Cancelado') { %>
                    <section class="tracking-step <%= pedido.STATUS_PEDIDO === 'Enviado' || pedido.STATUS_PEDIDO === 'Conclu√≠do' ? 'completed' : '' %>">
                      <span class="step-icon"><%= pedido.STATUS_PEDIDO === 'Enviado' || pedido.STATUS_PEDIDO === 'Conclu√≠do' ? '‚úì' : '‚óã' %></span>
                      <section class="step-info">
                        <p class="step-title">Em Prepara√ß√£o</p>
                        <p class="step-time">Processando...</p>
                      </section>
                    </section>
                    <section class="tracking-step <%= pedido.STATUS_PEDIDO === 'Enviado' ? 'active' : pedido.STATUS_PEDIDO === 'Conclu√≠do' ? 'completed' : '' %>">
                      <span class="step-icon"><%= pedido.STATUS_PEDIDO === 'Enviado' ? 'üöö' : pedido.STATUS_PEDIDO === 'Conclu√≠do' ? '‚úì' : '‚óã' %></span>
                      <section class="step-info">
                        <p class="step-title">Saiu para Entrega</p>
                        <p class="step-time"><%= pedido.STATUS_PEDIDO === 'Enviado' || pedido.STATUS_PEDIDO === 'Conclu√≠do' ? 'Em tr√¢nsito' : 'Aguardando' %></p>
                      </section>
                    </section>
                    <section class="tracking-step <%= pedido.STATUS_PEDIDO === 'Conclu√≠do' ? 'completed' : '' %>">
                      <span class="step-icon"><%= pedido.STATUS_PEDIDO === 'Conclu√≠do' ? '‚úì' : '‚óã' %></span>
                      <section class="step-info">
                        <p class="step-title">Entregue</p>
                        <p class="step-time"><%= pedido.STATUS_PEDIDO === 'Conclu√≠do' ? 'Entregue' : 'Previs√£o em breve' %></p>
                      </section>
                    </section>
                  <% } %>
                </section>
              </section>
            <% }); %>
          <% } else { %>
            <section class="no-orders">
              <div class="empty-state">
                <img src="imagens/compras vazia.png" alt="Nenhuma compra" class="empty-icon">
                <h2>Voc√™ ainda n√£o fez nenhuma compra</h2>
                <p>Explore nossos produtos e encontre pe√ßas incr√≠veis!</p>
                <div class="empty-actions">
                  <a href="/categorias" class="btn-primary">Come√ßar a Comprar</a>
                  <a href="/favoritos" class="btn-secondary">Ver Favoritos</a>
                </div>
              </div>
            </section>
          <% } %>
        </section>

      </section>
    </main>
    <!--                                                    Rodap√©                                                      -->
    <footer class="footer">
      <img src="imagens/logo2.jpeg" alt="Imagem do Rodap√©" class="footer-image">
      <section class="social-media">
        <p class="p-footer">Siga nossas redes sociais</p>
        <ul class="social-links">
          <li><a href="https://facebook.com" target="_blank" class="social-link"><img src="imagens/Facebook.png" alt="Facebook"></a></li>
          <li><a href="https://twitter.com" target="_blank" class="social-link"><img src="imagens/Pinterest.png" alt="Pinterest"></a></li>
          <li><a href="https://www.instagram.com/vintelobrechos" target="_blank" class="social-link"><img src="imagens/Instagram.png" alt="Instagram"></a></li>
        </ul>
      </section>
       <p class="copyright">¬©2024 Vint√©lo. Todos os direitos reservados.</p>
    </footer>
    <script src="/js/perfil-autenticado.js"></script>
    <script src="/js/navegacao.js"></script>
    <script src="/js/navegacao.js"></script>
    <script src="script/minhascompras.js"></script>
    <script src="/js/busca-global.js"></script>
        <script>
        function goBack() {
            window.history.back();
        }
    </script>
    </body>
    </html>
    